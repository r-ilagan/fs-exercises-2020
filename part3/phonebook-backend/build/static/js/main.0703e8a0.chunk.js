(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{17:function(e,n,t){e.exports=t(40)},22:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),o=t(14),u=t.n(o),c=(t(22),t(16)),l=t(15),i=t(2),d=t(3),m=t.n(d),f="/api/persons",s=function(){return m.a.get(f).then((function(e){return e.data}))},h=function(e){return m.a.post(f,e).then((function(e){return e.data}))},b=function(e){m.a.delete("".concat(f,"/").concat(e))},p=function(e,n){return m.a.put("".concat(f,"/").concat(e),n).then((function(e){return e.data}))},g=function(e){var n=e.handleFilter;return r.a.createElement("div",null,"filter shown with ",r.a.createElement("input",{onChange:n}))},v=function(e){var n=e.message,t=e.isError?{color:"red",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10,textColor:"red"}:{color:"green",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10};return null===n?null:r.a.createElement("div",{style:t},n)},E=function(e){var n=e.handlers,t=e.states,a=n.addNewName,o=n.handleNameChange,u=n.handleNumberChange,c=t.newName,l=t.newNumber;return r.a.createElement("form",{onSubmit:a},r.a.createElement("div",null,"name: ",r.a.createElement("input",{value:c,onChange:o})),r.a.createElement("div",null,"number: ",r.a.createElement("input",{value:l,onChange:u})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},w=function(e){var n=e.filter,t=e.persons,a=e.handleDelete;return r.a.createElement("div",null,t.filter((function(e){return e.name.toLowerCase().includes(n)})).map((function(e){return r.a.createElement("p",{key:e.name},e.name," ",e.number," ",r.a.createElement("button",{onClick:function(){return n=e.name,t=e.id,void(window.confirm("Delete ".concat(n,"?"))&&a(t));var n,t}},"delete"))})))},j=function(){var e=Object(a.useState)([]),n=Object(i.a)(e,2),t=n[0],o=n[1],u=Object(a.useState)(""),d=Object(i.a)(u,2),m=d[0],f=d[1],j=Object(a.useState)(""),O=Object(i.a)(j,2),N=O[0],y=O[1],S=Object(a.useState)(""),C=Object(i.a)(S,2),k=C[0],D=C[1],B=Object(a.useState)(null),I=Object(i.a)(B,2),x=I[0],z=I[1],F=Object(a.useState)(!1),J=Object(i.a)(F,2),R=J[0],T=J[1];Object(a.useEffect)((function(){s().then((function(e){o(e),console.log("people loaded",e.length,"people")}))}),[]);return r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(v,{message:x,isError:R}),r.a.createElement(g,{handleFilter:function(e){D(e.target.value)}}),r.a.createElement("h2",null,"add a new"),r.a.createElement(E,{handlers:{addNewName:function(e){e.preventDefault();var n,a=!1,r=0,u=Object(l.a)(t);try{for(u.s();!(n=u.n()).done;){var i=n.value;i.name===m&&(r=i.id,a=!0)}}catch(g){u.e(g)}finally{u.f()}if(a){if(window.confirm("".concat(m," is already added to phonebook, replace the old number with a new one?"))){var d=t.find((function(e){return e.id===r})),s=Object(c.a)({},d,{number:N});p(r,s).then((function(e){o(t.map((function(n){return n.id!==r?n:e}))),z("Changed ".concat(e.name,"'s number")),f(""),y("")})).catch((function(e){T(!0),z("Information of ".concat(d.name," has already been removed from the server")),setTimeout((function(){return z(null)}),4e3),f(""),y(""),o(t.filter((function(e){return e.id!==d.id})))}))}}else{var b={name:m,number:N,id:t.length+1};h(b).then((function(e){o(t.concat(e)),f(""),y(""),T(!1),z("Added ".concat(e.name)),setTimeout((function(){return z(null)}),4e3)}))}},handleNameChange:function(e){f(e.target.value)},handleNumberChange:function(e){y(e.target.value)}},states:{newName:m,newNumber:N}}),r.a.createElement("h2",null,"Numbers"),r.a.createElement(w,{filter:k,persons:t,handleDelete:function(e){b(e),o(t.filter((function(n){return n.id!==parseInt(e)})))}}))};u.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(j,null)),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.0703e8a0.chunk.js.map