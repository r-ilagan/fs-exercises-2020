{"version":3,"sources":["services/person.js","components/Filter.js","components/Notification.js","components/PersonForm.js","components/Persons.js","App.js","index.js"],"names":["baseURL","axios","get","then","response","data","makePerson","post","id","delete","newNumber","put","Filter","handleFilter","onChange","Notification","message","messageClass","isError","color","background","fontSize","borderStyle","borderRadius","padding","marginBottom","textColor","style","PersonForm","handlers","states","addNewName","handleNameChange","handleNumberChange","newName","onSubmit","value","type","Persons","filter","persons","handleDelete","person","name","toLowerCase","includes","map","key","number","onClick","window","confirm","App","useState","setPersons","setNewName","setNewNumber","setFilter","setMessage","setIsError","useEffect","personService","console","log","length","event","target","preventDefault","exists","personToUpdate","find","changes","updatedPerson","contact","setTimeout","catch","error","concat","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.36f2faa0.chunk.js","sourcesContent":["import axios from 'axios';\n\nconst baseURL = '/api/persons';\n\nconst getAllPersons = () => {\n  const request = axios.get(baseURL);\n  return request.then((response) => {\n    return response.data;\n  });\n};\n\nconst addNewPerson = (makePerson) => {\n  const request = axios.post(baseURL, makePerson);\n  return request.then((response) => {\n    return response.data;\n  });\n};\n\nconst removePerson = (id) => {\n  axios.delete(`${baseURL}/${id}`);\n};\n\nconst changeNumber = (id, newNumber) => {\n  const request = axios.put(`${baseURL}/${id}`, newNumber);\n  return request.then((response) => response.data);\n};\n\nexport default {\n  getAllPersons,\n  addNewPerson,\n  removePerson,\n  changeNumber,\n};\n","import React from 'react';\n\nconst Filter = ({ handleFilter }) => {\n  return (\n    <div>\n      filter shown with <input onChange={handleFilter} />\n    </div>\n  );\n};\n\nexport default Filter;\n","import React from 'react';\n\nconst Notification = ({ message, isError }) => {\n  const errorCss = {\n    color: 'red',\n    background: 'lightgrey',\n    fontSize: 20,\n    borderStyle: 'solid',\n    borderRadius: 5,\n    padding: 10,\n    marginBottom: 10,\n    textColor: 'red',\n  };\n\n  const notification = {\n    color: 'green',\n    background: 'lightgrey',\n    fontSize: 20,\n    borderStyle: 'solid',\n    borderRadius: 5,\n    padding: 10,\n    marginBottom: 10,\n  };\n\n  const messageClass = isError ? errorCss : notification;\n\n  if (message === null) return null;\n  return <div style={messageClass}>{message}</div>;\n};\n\nexport default Notification;\n","import React from 'react';\n\nconst PersonForm = ({ handlers, states }) => {\n  const { addNewName, handleNameChange, handleNumberChange } = handlers;\n  const { newName, newNumber } = states;\n  return (\n    <form onSubmit={addNewName}>\n      <div>\n        name: <input value={newName} onChange={handleNameChange} />\n      </div>\n      <div>\n        number: <input value={newNumber} onChange={handleNumberChange} />\n      </div>\n      <div>\n        <button type=\"submit\">add</button>\n      </div>\n    </form>\n  );\n};\n\nexport default PersonForm;\n","import React from 'react';\n\nconst Persons = ({ filter, persons, handleDelete }) => {\n  const confirmDelete = (name, id) => {\n    if (window.confirm(`Delete ${name}?`)) {\n      handleDelete(id);\n    }\n  };\n\n  return (\n    <div>\n      {persons\n        .filter((person) => person.name.toLowerCase().includes(filter))\n        .map((person) => (\n          <p key={person.name}>\n            {person.name} {person.number}{' '}\n            <button onClick={() => confirmDelete(person.name, person.id)}>\n              delete\n            </button>\n          </p>\n        ))}\n    </div>\n  );\n};\n\nexport default Persons;\n","import React, { useState, useEffect } from 'react';\nimport personService from './services/person';\nimport Filter from './components/Filter';\nimport Notification from './components/Notification';\nimport PersonForm from './components/PersonForm';\nimport Persons from './components/Persons';\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState('');\n  const [newNumber, setNewNumber] = useState('');\n  const [filter, setFilter] = useState('');\n  const [message, setMessage] = useState(null);\n  const [isError, setIsError] = useState(false);\n\n  const hook = () => {\n    personService.getAllPersons().then((persons) => {\n      setPersons(persons);\n      console.log('people loaded', persons.length, 'people');\n    });\n  };\n\n  useEffect(hook, []);\n\n  const addNewName = (event) => {\n    event.preventDefault();\n    let exists = false;\n    let id;\n\n    for (const person of persons) {\n      if (person.name === newName) {\n        id = person.id;\n        exists = true;\n      }\n    }\n\n    if (!exists) {\n      const makePerson = {\n        name: newName,\n        number: newNumber,\n      };\n      personService.addNewPerson(makePerson).then((person) => {\n        setPersons(persons.concat(person));\n        setNewName('');\n        setNewNumber('');\n        setIsError(false);\n        setMessage(`Added ${person.name}`);\n        setTimeout(() => setMessage(null), 4000);\n      });\n    } else {\n      if (\n        window.confirm(\n          `${newName} is already added to phonebook, replace the old number with a new one?`\n        )\n      ) {\n        const personToUpdate = persons.find((person) => person.id === id);\n        const changes = { ...personToUpdate, number: newNumber };\n        personService\n          .changeNumber(id, changes)\n          .then((updatedPerson) => {\n            setPersons(\n              persons.map((contact) =>\n                contact.id !== id ? contact : updatedPerson\n              )\n            );\n            setMessage(`Changed ${updatedPerson.name}'s number`);\n            setTimeout(() => setMessage(null), 4000);\n            setNewName('');\n            setNewNumber('');\n          })\n          .catch((error) => {\n            setIsError(true);\n            setMessage(\n              `Information of ${personToUpdate.name} has already been removed from the server`\n            );\n            setTimeout(() => setMessage(null), 4000);\n            setNewName('');\n            setNewNumber('');\n            setPersons(\n              persons.filter((person) => person.id !== personToUpdate.id)\n            );\n          });\n      }\n    }\n  };\n\n  const handleNameChange = (event) => {\n    setNewName(event.target.value);\n  };\n\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value);\n  };\n\n  const handleFilter = (event) => {\n    setFilter(event.target.value);\n  };\n\n  const handleDelete = (id) => {\n    personService.removePerson(id);\n    setPersons(\n      persons.filter((person) => {\n        return person.id !== id;\n      })\n    );\n  };\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={message} isError={isError} />\n      <Filter handleFilter={handleFilter} />\n      <h2>add a new</h2>\n      <PersonForm\n        handlers={{ addNewName, handleNameChange, handleNumberChange }}\n        states={{ newName, newNumber }}\n      />\n      <h2>Numbers</h2>\n      <Persons filter={filter} persons={persons} handleDelete={handleDelete} />\n    </div>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}